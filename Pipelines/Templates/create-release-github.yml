parameters:
- name: solutionName
  type: string
- name: solutionDisplayName
  type: string
- name: releaseMonth
  type: string
- name: releaseYear
  type: string
- name: connectionName
  type: string
- name: releaseNotesPath
  type: string

steps:  
# Get the solution package from artifact uploaded by the build pipeline
#- task: DownloadPipelineArtifact@2
#  displayName: 'Download Build Pipeline Artifact'

- task: GitHubRelease@1
  inputs:
    gitHubConnection: ${{ parameters.connectionName }}
    tagSource: 'userSpecifiedTag'
    tag: '${{ parameters.solutionName }}-${{ parameters.releaseMonth }}${{ parameters.releaseYear }}'
    title: '${{ parameters.solutionDisplayName }} ${{ parameters.releaseMonth }} ${{ parameters.releaseYear }}'
    releaseNotesFilePath: '${{ parameters.releaseNotesPath }}'
    changeLogType: issueBased
    isDraft: true
    isPreRelease: true
    assets: |
      $(Pipeline.Workspace)/releaseassets/*.*
  displayName: 'Create ${{ parameters.solutionDisplayName }} Release'

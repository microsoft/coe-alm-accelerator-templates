steps:
# TEMPORARY WORKAROUND: Power Apps CLI functionality will eventually be surfaced in Azure DevOps tasks.
# However, to use functionality ahead of the tasks, we install the CLI.  Once the task is available, we move to using the task.
- powershell: |
    $nugetPackage = "Microsoft.PowerApps.CLI"
    $nugetPackageVersion = "$[variables.pacVersion]"
    $temp = "'" + $nugetPackageVersion + "'"
    Write-Host $temp
    if ($nugetPackageVersion = ""){
      $nugetPackageVersion =  "1.7.2"
    }    
    $outFolder = "pac"
    nuget install $nugetPackage -Version $nugetPackageVersion -OutputDirectory $outFolder
    $pacNugetFolder = Get-ChildItem $outFolder | Where-Object {$_.Name -match $nugetPackage + "."}
    $pacPath = $pacNugetFolder.FullName + "\tools"
    echo "##vso[task.setvariable variable=pacPath]$pacPath"
  displayName: 'Install Power Apps CLI'
